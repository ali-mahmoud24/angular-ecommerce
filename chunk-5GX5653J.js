import{a as Qe}from"./chunk-E2NVJRL7.js";import{a as U,b as _,c as O,d as B,f as Ie,h as A,i as ue,j as M,k as $,l as Y,m as Z,n as ee,o as Je,p as pe,s as G,u as q,v as w}from"./chunk-BB2RL6FD.js";import{$ as Ne,A as T,Aa as C,B as s,Ca as $e,D as b,Da as Ge,E as y,Ha as qe,J as L,Ja as He,Ka as Re,Ma as ze,Na as We,O as u,P as p,Q as Pe,R as je,S as F,T as E,U as h,V as n,W as o,X as v,Y as S,Z as c,_ as m,aa as K,ba as a,ca as N,da as x,f as Ve,g as ae,i as le,la as De,m as V,ma as X,na as Ue,oa as me,p as P,r as f,s as g,t as I,u as Q,ua as Oe,xa as Be,ya as Ae,za as Me}from"./chunk-2AKTDUK2.js";var tt=(r,e)=>({"justify-center":r,"px-6":e}),it=(r,e)=>e.route;function rt(r,e){r&1&&(n(0,"div",2)(1,"span",7),a(2,"dashboard"),o(),a(3," Admin "),o())}function nt(r,e){r&1&&(n(0,"span",3),a(1,"dashboard"),o())}function ot(r,e){if(r&1&&(n(0,"span"),a(1),o()),r&2){let t=m().$implicit;s(),N(t.label)}}function at(r,e){if(r&1){let t=S();n(0,"a",10),c("click",function(){f(t);let l=m();return g(l.closeSidebar())}),n(1,"span",11),a(2),o(),u(3,ot,2,1,"span"),o()}if(r&2){let t=e.$implicit,i=m();h("routerLink",t.route)("ngClass",De(4,tt,i.collapsed,!i.collapsed)),s(2),N(t.icon),s(),p(i.collapsed?-1:3)}}var fe=class r{collapsed=!1;toggleCollapse=new L;closeMenu=new L;menu=[{label:"Brands",icon:"store",route:"/admin/brands"},{label:"Categories",icon:"category",route:"/admin/categories"},{label:"Subcategories",icon:"account_tree",route:"/admin/subcategories"},{label:"Products",icon:"inventory_2",route:"/admin/products"},{label:"Coupons",icon:"sell",route:"/admin/coupons"},{label:"Users",icon:"people",route:"/admin/users"}];closeSidebar(){this.closeMenu.emit()}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=y({type:r,selectors:[["app-navigation"]],inputs:{collapsed:"collapsed"},outputs:{toggleCollapse:"toggleCollapse",closeMenu:"closeMenu"},decls:13,vars:8,consts:[[1,"flex","flex-col","h-full","bg-white","border-r","border-gray-200","transition-all","duration-300"],[1,"flex","items-center","justify-between","p-4","border-b","border-gray-200"],[1,"flex","items-center","gap-2","text-blue-600","font-semibold","text-lg"],[1,"material-icons","text-blue-600"],[1,"hidden","md:block","p-1","rounded","hover:bg-gray-100",3,"click"],[1,"material-icons","text-gray-500","text-[20px]"],[1,"md:hidden","p-2","hover:bg-gray-100",3,"click"],[1,"material-icons"],[1,"flex-1","overflow-y-auto","py-4","space-y-1"],["routerLinkActive","active",1,"flex","items-center","gap-3","px-4","py-3","hover:bg-blue-50","hover:text-blue-600","transition-colors",3,"routerLink","ngClass"],["routerLinkActive","active",1,"flex","items-center","gap-3","px-4","py-3","hover:bg-blue-50","hover:text-blue-600","transition-colors",3,"click","routerLink","ngClass"],[1,"material-icons","text-gray-500"]],template:function(t,i){t&1&&(n(0,"div",0)(1,"div",1),u(2,rt,4,0,"div",2)(3,nt,2,0,"span",3),n(4,"button",4),c("click",function(){return i.toggleCollapse.emit()}),n(5,"span",5),a(6),o()(),n(7,"button",6),c("click",function(){return i.closeSidebar()}),n(8,"span",7),a(9,"close"),o()()(),n(10,"nav",8),F(11,at,4,7,"a",9,it),o()()),t&2&&(K("w-64",!i.collapsed)("w-20",i.collapsed),s(),K("justify-center",i.collapsed),s(),p(i.collapsed?3:2),s(4),x(" ",i.collapsed?"chevron_right":"chevron_left"," "),s(5),E(i.menu))},dependencies:[C,Oe,ze,He,Re],styles:["a.active[_ngcontent-%COMP%]{background-color:#eaf2ff;color:#1e40af;font-weight:600}a.active[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{color:#1e40af}.material-icons[_ngcontent-%COMP%]{font-size:20px;vertical-align:middle}"]})};function lt(r,e){if(r&1){let t=S();n(0,"div",14),c("click",function(){f(t);let l=m();return g(l.closeSidebar())}),o()}}var ge=class r{constructor(e){this.authService=e}sidebarOpen=!1;collapsed=!1;get windowWidth(){return window.innerWidth}toggleCollapse(){this.collapsed=!this.collapsed}toggleSidebar(){this.sidebarOpen=!this.sidebarOpen}closeSidebar(){this.sidebarOpen=!1}logout(){this.authService.logout()}static \u0275fac=function(t){return new(t||r)(b(Qe))};static \u0275cmp=y({type:r,selectors:[["app-admin-layout"]],decls:19,vars:12,consts:[[1,"flex","h-screen","bg-gray-50","text-gray-800","overflow-hidden"],[1,"fixed","inset-y-0","left-0","z-40","bg-white","border-r","border-gray-200","transform","transition-all","duration-300","ease-in-out","md:static","md:translate-x-0"],[3,"toggleCollapse","closeMenu","collapsed"],[1,"fixed","inset-0","bg-black/30","backdrop-blur-sm","z-30","md:hidden","transition-opacity"],[1,"flex","flex-col","flex-1","w-full","overflow-hidden"],[1,"flex","items-center","justify-between","p-4","bg-white","border-b","border-gray-200"],[1,"flex","items-center","gap-3"],[1,"md:hidden","p-2","rounded-lg","hover:bg-gray-100",3,"click"],[1,"material-icons"],[1,"font-semibold","text-lg","text-blue-600","transition-all","duration-300"],[1,"flex","items-center","gap-2","bg-gray-100","text-gray-700","px-4","py-2","rounded-xl","hover:bg-gray-200","hover:text-gray-900","transition-all","duration-200",3,"click"],[1,"material-icons","text-[20px]"],[1,"hidden","sm:inline","font-medium"],[1,"flex-1","overflow-y-auto","p-6"],[1,"fixed","inset-0","bg-black/30","backdrop-blur-sm","z-30","md:hidden","transition-opacity",3,"click"]],template:function(t,i){t&1&&(n(0,"div",0)(1,"div",1)(2,"app-navigation",2),c("toggleCollapse",function(){return i.toggleCollapse()})("closeMenu",function(){return i.closeSidebar()}),o()(),u(3,lt,1,0,"div",3),n(4,"div",4)(5,"header",5)(6,"div",6)(7,"button",7),c("click",function(){return i.toggleSidebar()}),n(8,"span",8),a(9,"menu"),o()(),n(10,"h1",9),a(11," Shoply "),o()(),n(12,"button",10),c("click",function(){return i.logout()}),n(13,"span",11),a(14,"logout"),o(),n(15,"span",12),a(16,"Logout"),o()()(),n(17,"main",13),v(18,"router-outlet"),o()()()),t&2&&(s(),K("w-64",!i.collapsed)("w-20",i.collapsed)("-translate-x-full",!i.sidebarOpen),s(),h("collapsed",i.collapsed),s(),p(i.sidebarOpen?3:-1),s(7),K("opacity-0",i.collapsed&&i.windowWidth>=768)("w-0",i.collapsed&&i.windowWidth>=768))},dependencies:[C,qe,fe],styles:["[_nghost-%COMP%]{display:block;height:100%}main[_ngcontent-%COMP%]{background-color:#f9fafb}"]})};var j=class r{constructor(e){this.http=e}baseUrl=We.apiUrl;getUrl(e){return`${this.baseUrl}/${e}`}handleError(e){return console.error("API Error:",e),Ve(()=>e.error?.message||"Something went wrong")}extractData(e){return e?.data?e.data:e}get(e,t){let i=new $e;return t&&Object.entries(t).forEach(([l,d])=>{i=i.set(l,d)}),this.http.get(this.getUrl(e),{params:i}).pipe(ae(l=>this.extractData(l)),le(this.handleError))}post(e,t){return this.http.post(this.getUrl(e),t).pipe(ae(i=>this.extractData(i)),le(this.handleError))}put(e,t){return this.http.put(this.getUrl(e),t).pipe(ae(i=>this.extractData(i)),le(this.handleError))}delete(e){return this.http.delete(this.getUrl(e)).pipe(ae(t=>this.extractData(t)),le(this.handleError))}static \u0275fac=function(t){return new(t||r)(P(Ge))};static \u0275prov=V({token:r,factory:r.\u0275fac,providedIn:"root"})};var W=class r{constructor(e){this.http=e}endpoint="brands";getAll(){return this.http.get(this.endpoint)}create(e){return this.http.post(this.endpoint,e)}update(e,t){return this.http.put(`${this.endpoint}/${e}`,t)}delete(e){return this.http.delete(`${this.endpoint}/${e}`)}static \u0275fac=function(t){return new(t||r)(P(j))};static \u0275prov=V({token:r,factory:r.\u0275fac,providedIn:"root"})};function st(r,e){if(r&1&&v(0,"img",5),r&2){let t=m();h("src",t.preview,T)}}var he=class r{constructor(e,t,i){this.fb=e;this.service=t;this.toast=i;this.form=this.fb.group({name:["",[_.required,_.minLength(2)]]})}data;close=new L;form;imageFile;preview;loading=!1;ngOnInit(){this.data&&(this.form.patchValue({name:this.data.name}),this.preview=this.data.imageUrl)}onFileChange(e){let t=e.target;if(t.files?.length){this.imageFile=t.files[0];let i=new FileReader;i.onload=()=>this.preview=i.result,i.readAsDataURL(this.imageFile)}}save(){if(this.form.invalid)return;this.loading=!0;let e=new FormData;e.append("name",this.form.value.name),this.imageFile&&e.append("image",this.imageFile),(this.data?this.service.update(this.data.id,e):this.service.create(e)).subscribe({next:i=>{this.toast.show(this.data?"Brand updated successfully":"Brand created successfully","success"),this.close.emit({updated:!0,brand:i})},error:()=>{this.loading=!1,this.toast.show("Something went wrong","error")},complete:()=>this.loading=!1})}static \u0275fac=function(t){return new(t||r)(b(G),b(W),b(w))};static \u0275cmp=y({type:r,selectors:[["app-brand-form"]],inputs:{data:"data"},outputs:{close:"close"},decls:17,vars:5,consts:[[1,"text-xl","font-semibold","mb-4"],[1,"space-y-4",3,"ngSubmit","formGroup"],[1,"block","text-gray-600","mb-1"],["formControlName","name","type","text","placeholder","Enter brand name",1,"w-full","border","border-gray-300","rounded-lg","px-3","py-2","focus:ring-2","focus:ring-blue-500","outline-none"],["type","file",1,"block","w-full","text-sm","text-gray-500","file:mr-4","file:py-2","file:px-4","file:rounded-lg","file:border-0","file:text-sm","file:font-semibold","file:bg-blue-50","file:text-blue-700","hover:file:bg-blue-100",3,"change"],[1,"mt-3","w-24","h-24","object-cover","rounded-lg","border",3,"src"],[1,"flex","justify-end","space-x-3","pt-4","border-t"],["type","button",1,"px-4","py-2","border","rounded-lg","hover:bg-gray-100","transition",3,"click"],["type","submit",1,"relative","px-4","py-2","rounded-lg","bg-blue-600","text-white","hover:bg-blue-700","transition","disabled:opacity-60",3,"disabled"]],template:function(t,i){t&1&&(n(0,"h2",0),a(1),o(),n(2,"form",1),c("ngSubmit",function(){return i.save()}),n(3,"div")(4,"label",2),a(5,"Brand Name"),o(),v(6,"input",3),o(),n(7,"div")(8,"label",2),a(9,"Image"),o(),n(10,"input",4),c("change",function(d){return i.onFileChange(d)}),o(),u(11,st,1,1,"img",5),o(),n(12,"div",6)(13,"button",7),c("click",function(){return i.close.emit({updated:!1})}),a(14," Cancel "),o(),n(15,"button",8),a(16),o()()()),t&2&&(s(),x(" ",i.data?"Edit Brand":"Add Brand",`
`),s(),h("formGroup",i.form),s(9),p(i.preview?11:-1),s(4),h("disabled",i.loading),s(),x(" ",i.loading?i.data?"Updating...":"Creating...":i.data?"Update":"Create"," "))},dependencies:[C,q,A,U,O,B,M,$],encapsulation:2})};var ct=(r,e)=>e.id;function dt(r,e){r&1&&(n(0,"div",6),a(1,"Loading brands..."),o())}function mt(r,e){if(r&1){let t=S();n(0,"tr",14)(1,"td",15),v(2,"img",16),o(),n(3,"td",17),a(4),o(),n(5,"td",18)(6,"button",19),c("click",function(){let l=f(t).$implicit,d=m(2);return g(d.openForm(l))}),I(),n(7,"svg",4),v(8,"path",20),o()(),Q(),n(9,"button",21),c("click",function(){let l=f(t).$implicit,d=m(2);return g(d.delete(l.id))}),I(),n(10,"svg",4),v(11,"path",22),o()()()()}if(r&2){let t=e.$implicit;s(2),h("src",t.imageUrl,T),s(2),x(" ",t.name," ")}}function ut(r,e){if(r&1&&(n(0,"div",7)(1,"table",10)(2,"thead",11)(3,"tr")(4,"th",12),a(5,"Image"),o(),n(6,"th",12),a(7,"Name"),o(),n(8,"th",13),a(9,"Actions"),o()()(),n(10,"tbody"),F(11,mt,12,2,"tr",14,ct),o()()()),r&2){let t=m();s(11),E(t.brands)}}function pt(r,e){r&1&&(n(0,"div",8),a(1,"No brands found."),o())}function ft(r,e){if(r&1){let t=S();n(0,"div",23),c("click",function(){f(t);let l=m();return g(l.closeForm())}),n(1,"div",24),c("click",function(l){return f(t),g(l.stopPropagation())}),n(2,"button",25),c("click",function(){f(t);let l=m();return g(l.closeForm())}),a(3," \xD7 "),o(),n(4,"app-brand-form",26),c("close",function(l){f(t);let d=m();return g(d.closeForm(l))}),o()()()}if(r&2){let t=m();s(4),h("data",t.selectedBrand)}}var ve=class r{constructor(e,t){this.service=e;this.toast=t}brands=[];loading=!0;selectedBrand;showForm=!1;ngOnInit(){this.loadBrands()}loadBrands(){this.loading=!0,this.service.getAll().subscribe({next:e=>{this.brands=e,this.loading=!1},error:()=>this.loading=!1})}openForm(e){this.selectedBrand=e,this.showForm=!0}closeForm(e){if(this.showForm=!1,!!e?.updated){if(this.selectedBrand){let t=this.brands.findIndex(i=>i.id===this.selectedBrand.id);t!==-1&&e.brand&&(this.brands[t]=e.brand)}else e.brand&&this.brands.unshift(e.brand);this.selectedBrand=void 0}}delete(e){confirm("Delete this brand?")&&this.service.delete(e).subscribe({next:()=>{this.brands=this.brands.filter(t=>t.id!==e),this.toast.show("Brand deleted successfully","success")},error:()=>this.toast.show("Failed to delete brand","error")})}static \u0275fac=function(t){return new(t||r)(b(W),b(w))};static \u0275cmp=y({type:r,selectors:[["app-brand-list"]],decls:12,vars:4,consts:[[1,"flex","flex-col","h-full"],[1,"flex","items-center","justify-between","mb-6"],[1,"text-2xl","font-semibold","text-gray-800"],[1,"inline-flex","items-center","gap-2","bg-blue-600","text-white","px-4","py-2","rounded-lg","shadow-sm","hover:bg-blue-700","active:bg-blue-800","transition-colors","duration-200",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4v16m8-8H4"],[1,"flex-1","flex","items-center","justify-center","text-gray-500","text-sm"],[1,"overflow-x-auto","bg-white","rounded-lg","shadow","border","border-gray-100"],[1,"flex-1","flex","items-center","justify-center","text-gray-400"],[1,"fixed","inset-0","bg-black/50","flex","items-center","justify-center","z-50","backdrop-blur-sm","transition-opacity","duration-300","animate-fade-in"],[1,"min-w-full","text-sm","text-gray-700"],[1,"bg-gray-100","text-gray-600","text-xs","uppercase"],[1,"text-left","p-3"],[1,"text-right","p-3"],[1,"border-b","hover:bg-gray-50","transition-colors","duration-150"],[1,"p-3"],["alt","Brand",1,"w-12","h-12","object-cover","rounded-md","border","border-gray-200",3,"src"],[1,"p-3","font-medium","text-gray-800"],[1,"p-3","text-right","space-x-2"],["title","Edit",1,"inline-flex","items-center","justify-center","w-8","h-8","text-blue-600","hover:text-blue-800","rounded-md","hover:bg-blue-50","transition-colors",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15.232 5.232a2.5 2.5 0 113.536 3.536L8.5 19.036l-4 1 1-4 10.732-10.804z"],["title","Delete",1,"inline-flex","items-center","justify-center","w-8","h-8","text-red-600","hover:text-red-800","rounded-md","hover:bg-red-50","transition-colors",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"fixed","inset-0","bg-black/50","flex","items-center","justify-center","z-50","backdrop-blur-sm","transition-opacity","duration-300","animate-fade-in",3,"click"],[1,"bg-white","rounded-xl","shadow-xl","w-full","max-w-md","p-6","relative","transform","transition-all","duration-300","animate-slide-up",3,"click"],[1,"absolute","top-3","right-4","text-gray-500","hover:text-gray-700","text-xl",3,"click"],[3,"close","data"]],template:function(t,i){t&1&&(n(0,"div",0)(1,"header",1)(2,"h2",2),a(3,"Brands"),o(),n(4,"button",3),c("click",function(){return i.openForm()}),I(),n(5,"svg",4),v(6,"path",5),o(),a(7," Add Brand "),o()(),u(8,dt,2,0,"div",6),u(9,ut,13,0,"div",7),u(10,pt,2,0,"div",8),u(11,ft,5,1,"div",9),o()),t&2&&(s(8),p(i.loading?8:-1),s(),p(!i.loading&&i.brands.length>0?9:-1),s(),p(!i.loading&&i.brands.length===0?10:-1),s(),p(i.showForm?11:-1))},dependencies:[C,he],encapsulation:2})};var H=class r{constructor(e){this.http=e}endpoint="categories";getAll(){return this.http.get(this.endpoint)}getOneById(e){return this.http.get(`${this.endpoint}/${e}`)}create(e){return this.http.post(this.endpoint,e)}update(e,t){return this.http.put(`${this.endpoint}/${e}`,t)}delete(e){return this.http.delete(`${this.endpoint}/${e}`)}static \u0275fac=function(t){return new(t||r)(P(j))};static \u0275prov=V({token:r,factory:r.\u0275fac,providedIn:"root"})};function gt(r,e){if(r&1&&v(0,"img",5),r&2){let t=m();h("src",t.preview,T)}}var xe=class r{constructor(e,t,i){this.fb=e;this.service=t;this.toast=i;this.form=this.fb.group({name:["",[_.required,_.minLength(2)]]})}data;close=new L;form;imageFile;preview;loading=!1;ngOnInit(){this.data&&(this.form.patchValue({name:this.data.name}),this.preview=this.data.imageUrl)}onFileChange(e){let t=e.target;if(t.files?.length){this.imageFile=t.files[0];let i=new FileReader;i.onload=()=>this.preview=i.result,i.readAsDataURL(this.imageFile)}}save(){if(this.form.invalid)return;this.loading=!0;let e=new FormData;e.append("name",this.form.value.name),this.imageFile&&e.append("image",this.imageFile),(this.data?this.service.update(this.data.id,e):this.service.create(e)).subscribe({next:i=>{this.toast.show(this.data?"Category updated successfully":"Category created successfully","success"),this.close.emit({updated:!0,category:i})},error:()=>{this.loading=!1,this.toast.show("Something went wrong","error")},complete:()=>this.loading=!1})}static \u0275fac=function(t){return new(t||r)(b(G),b(H),b(w))};static \u0275cmp=y({type:r,selectors:[["app-category-form"]],inputs:{data:"data"},outputs:{close:"close"},decls:17,vars:5,consts:[[1,"text-xl","font-semibold","mb-4"],[1,"space-y-4",3,"ngSubmit","formGroup"],[1,"block","text-gray-600","mb-1"],["formControlName","name","type","text","placeholder","Enter category name",1,"w-full","border","border-gray-300","rounded-lg","px-3","py-2","focus:ring-2","focus:ring-blue-500","outline-none"],["type","file",1,"block","w-full","text-sm","text-gray-500","file:mr-4","file:py-2","file:px-4","file:rounded-lg","file:border-0","file:text-sm","file:font-semibold","file:bg-blue-50","file:text-blue-700","hover:file:bg-blue-100",3,"change"],[1,"mt-3","w-24","h-24","object-cover","rounded-lg","border",3,"src"],[1,"flex","justify-end","space-x-3","pt-4","border-t"],["type","button",1,"px-4","py-2","border","rounded-lg","hover:bg-gray-100","transition",3,"click"],["type","submit",1,"relative","px-4","py-2","rounded-lg","bg-blue-600","text-white","hover:bg-blue-700","transition","disabled:opacity-60",3,"disabled"]],template:function(t,i){t&1&&(n(0,"h2",0),a(1),o(),n(2,"form",1),c("ngSubmit",function(){return i.save()}),n(3,"div")(4,"label",2),a(5,"Category Name"),o(),v(6,"input",3),o(),n(7,"div")(8,"label",2),a(9,"Image"),o(),n(10,"input",4),c("change",function(d){return i.onFileChange(d)}),o(),u(11,gt,1,1,"img",5),o(),n(12,"div",6)(13,"button",7),c("click",function(){return i.close.emit({updated:!1})}),a(14," Cancel "),o(),n(15,"button",8),a(16),o()()()),t&2&&(s(),x(" ",i.data?"Edit Category":"Add Category",`
`),s(),h("formGroup",i.form),s(9),p(i.preview?11:-1),s(4),h("disabled",i.loading),s(),x(" ",i.loading?i.data?"Updating...":"Creating...":i.data?"Update":"Create"," "))},dependencies:[C,q,A,U,O,B,M,$],encapsulation:2})};var bt=(r,e)=>e.id;function ht(r,e){r&1&&(n(0,"div",6),a(1," Loading categories... "),o())}function vt(r,e){if(r&1){let t=S();n(0,"tr",14)(1,"td",15),v(2,"img",16),o(),n(3,"td",17),a(4),o(),n(5,"td",18)(6,"button",19),c("click",function(){let l=f(t).$implicit,d=m(2);return g(d.openForm(l))}),I(),n(7,"svg",4),v(8,"path",20),o()(),Q(),n(9,"button",21),c("click",function(){let l=f(t).$implicit,d=m(2);return g(d.delete(l.id))}),I(),n(10,"svg",4),v(11,"path",22),o()()()()}if(r&2){let t=e.$implicit;s(2),h("src",t.imageUrl,T)("alt",t.name),s(2),x(" ",t.name," ")}}function xt(r,e){if(r&1&&(n(0,"div",7)(1,"table",10)(2,"thead",11)(3,"tr")(4,"th",12),a(5,"Image"),o(),n(6,"th",12),a(7,"Name"),o(),n(8,"th",13),a(9,"Actions"),o()()(),n(10,"tbody"),F(11,vt,12,3,"tr",14,bt),o()()()),r&2){let t=m();s(11),E(t.categories)}}function _t(r,e){r&1&&(n(0,"div",8),a(1,"No categories found."),o())}function yt(r,e){if(r&1){let t=S();n(0,"div",23),c("click",function(){f(t);let l=m();return g(l.closeForm())}),n(1,"div",24),c("click",function(l){return f(t),g(l.stopPropagation())}),n(2,"button",25),c("click",function(){f(t);let l=m();return g(l.closeForm())}),a(3," \xD7 "),o(),n(4,"app-category-form",26),c("close",function(l){f(t);let d=m();return g(d.closeForm(l))}),o()()()}if(r&2){let t=m();s(4),h("data",t.selectedCategory)}}var _e=class r{constructor(e,t){this.service=e;this.toast=t}categories=[];loading=!0;selectedCategory;showForm=!1;ngOnInit(){this.loadCategories()}loadCategories(){this.loading=!0,this.service.getAll().subscribe({next:e=>{this.categories=e,this.loading=!1},error:()=>this.loading=!1})}openForm(e){this.selectedCategory=e,this.showForm=!0}closeForm(e){if(this.showForm=!1,!!e?.updated){if(this.selectedCategory){let t=this.categories.findIndex(i=>i.id===this.selectedCategory.id);t!==-1&&e.category&&(this.categories[t]=e.category)}else e.category&&this.categories.unshift(e.category);this.selectedCategory=void 0}}delete(e){confirm("Delete this category?")&&this.service.delete(e).subscribe({next:()=>{this.categories=this.categories.filter(t=>t.id!==e),this.toast.show("Category deleted successfully","success")},error:()=>this.toast.show("Failed to delete category","error")})}static \u0275fac=function(t){return new(t||r)(b(H),b(w))};static \u0275cmp=y({type:r,selectors:[["app-catgory-list"]],decls:12,vars:4,consts:[[1,"flex","flex-col","h-full"],[1,"flex","items-center","justify-between","mb-6"],[1,"text-2xl","font-semibold","text-gray-800"],[1,"inline-flex","items-center","gap-2","bg-blue-600","text-white","px-4","py-2","rounded-lg","shadow-sm","hover:bg-blue-700","active:bg-blue-800","transition-colors","duration-200",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4v16m8-8H4"],[1,"flex-1","flex","items-center","justify-center","text-gray-500","text-sm"],[1,"overflow-x-auto","bg-white","rounded-lg","shadow","border","border-gray-100"],[1,"flex-1","flex","items-center","justify-center","text-gray-400"],[1,"fixed","inset-0","bg-black/50","flex","items-center","justify-center","z-50","backdrop-blur-sm","transition-opacity","duration-300","animate-fade-in"],[1,"min-w-full","text-sm","text-gray-700"],[1,"bg-gray-100","text-gray-600","text-xs","uppercase"],[1,"text-left","p-3"],[1,"text-right","p-3"],[1,"border-b","hover:bg-gray-50","transition-colors","duration-150"],[1,"p-3"],[1,"w-12","h-12","object-cover","rounded-md","border","border-gray-200",3,"src","alt"],[1,"p-3","font-medium","text-gray-800"],[1,"p-3","text-right","space-x-2"],["title","Edit",1,"inline-flex","items-center","justify-center","w-8","h-8","text-blue-600","hover:text-blue-800","rounded-md","hover:bg-blue-50","transition-colors",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15.232 5.232a2.5 2.5 0 113.536 3.536L8.5 19.036l-4 1 1-4 10.732-10.804z"],["title","Delete",1,"inline-flex","items-center","justify-center","w-8","h-8","text-red-600","hover:text-red-800","rounded-md","hover:bg-red-50","transition-colors",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"fixed","inset-0","bg-black/50","flex","items-center","justify-center","z-50","backdrop-blur-sm","transition-opacity","duration-300","animate-fade-in",3,"click"],[1,"bg-white","rounded-xl","shadow-xl","w-full","max-w-md","p-6","relative","transform","transition-all","duration-300","animate-slide-up",3,"click"],[1,"absolute","top-3","right-4","text-gray-500","hover:text-gray-700","text-xl",3,"click"],[3,"close","data"]],template:function(t,i){t&1&&(n(0,"div",0)(1,"header",1)(2,"h2",2),a(3,"Categories"),o(),n(4,"button",3),c("click",function(){return i.openForm()}),I(),n(5,"svg",4),v(6,"path",5),o(),a(7," Add Category "),o()(),u(8,ht,2,0,"div",6),u(9,xt,13,0,"div",7),u(10,_t,2,0,"div",8),u(11,yt,5,1,"div",9),o()),t&2&&(s(8),p(i.loading?8:-1),s(),p(!i.loading&&i.categories.length>0?9:-1),s(),p(!i.loading&&i.categories.length===0?10:-1),s(),p(i.showForm?11:-1))},dependencies:[C,xe],encapsulation:2})};var ie=class r{constructor(e){this.http=e}endpoint="subcategories";getAll(){return this.http.get(this.endpoint)}getByCategory(e){return this.http.get(`categories/${e}/subcategories`)}create(e){return this.http.post(this.endpoint,e)}update(e,t){return this.http.put(`${this.endpoint}/${e}`,t)}delete(e){return this.http.delete(`${this.endpoint}/${e}`)}static \u0275fac=function(t){return new(t||r)(P(j))};static \u0275prov=V({token:r,factory:r.\u0275fac,providedIn:"root"})};var Ct=(r,e)=>e.id;function St(r,e){r&1&&a(0," Name is required. ")}function wt(r,e){r&1&&a(0," Minimum 2 characters. ")}function Ft(r,e){if(r&1&&(n(0,"small",4),u(1,St,1,0)(2,wt,1,0),o()),r&2){let t,i=m();s(),p(!((t=i.form.get("name"))==null||t.errors==null)&&t.errors.required?1:!((t=i.form.get("name"))==null||t.errors==null)&&t.errors.minlength?2:-1)}}function Et(r,e){if(r&1&&(n(0,"option",11),a(1),o()),r&2){let t=e.$implicit;h("value",t.id),s(),N(t.name)}}function kt(r,e){if(r&1&&F(0,Et,2,2,"option",11,Ct),r&2){let t=m();E(t.categories)}}function Tt(r,e){r&1&&(n(0,"option",7),a(1,"Loading categories..."),o())}function It(r,e){r&1&&(n(0,"small",4),a(1,"Category is required."),o())}function Lt(r,e){if(r&1&&a(0),r&2){let t=m();x(" ",t.data?"Updating...":"Creating..."," ")}}function Vt(r,e){if(r&1&&a(0),r&2){let t=m();x(" ",t.data?"Update":"Create"," ")}}var ye=class r{constructor(e,t,i,l){this.fb=e;this.subcategoryService=t;this.categoryService=i;this.toast=l;this.form=this.fb.group({name:["",[_.required,_.minLength(2)]],category:["",_.required]})}data;close=new L;form;categories=[];loading=!1;getCategoryId(e){return typeof e=="object"?e.id:e}ngOnInit(){this.loadCategories(()=>{this.data&&this.form.patchValue({name:this.data.name,category:this.getCategoryId(this.data.category)})})}loadCategories(e){this.categoryService.getAll().subscribe({next:t=>{this.categories=t,e?.()},error:()=>this.toast.show("Failed to load categories","error")})}save(){if(this.form.invalid){this.toast.show("Please fill all required fields","error");return}this.loading=!0;let e={name:this.form.value.name.trim(),category:this.form.value.category};(this.data?this.subcategoryService.update(this.data.id,e):this.subcategoryService.create(e)).subscribe({next:i=>{if(this.toast.show(this.data?"Subcategory updated successfully":"Subcategory created successfully","success"),typeof i.category=="string"){let l=this.categories.find(d=>d.id===i.category);l&&(i.category=l)}this.close.emit({updated:!0,subcategory:i})},error:i=>{this.loading=!1,console.error("API Error:",i),this.toast.show("Something went wrong","error")},complete:()=>this.loading=!1})}static \u0275fac=function(t){return new(t||r)(b(G),b(ie),b(H),b(w))};static \u0275cmp=y({type:r,selectors:[["app-subcategory-form"]],inputs:{data:"data"},outputs:{close:"close"},decls:23,vars:7,consts:[[1,"text-xl","font-semibold","mb-5","text-gray-800"],[1,"space-y-5",3,"ngSubmit","formGroup"],[1,"block","text-gray-700","mb-1"],["type","text","formControlName","name","placeholder","Enter subcategory name",1,"w-full","border","border-gray-300","rounded-lg","px-3","py-2","focus:ring-2","focus:ring-blue-500","outline-none"],[1,"text-red-500"],["formControlName","category",1,"w-full","border","border-gray-300","rounded-lg","px-3","py-2","focus:ring-2","focus:ring-blue-500","outline-none"],["value",""],["disabled",""],[1,"flex","justify-end","gap-3","pt-5","border-t"],["type","button",1,"px-4","py-2","border","rounded-lg","hover:bg-gray-100","transition",3,"click"],["type","submit",1,"px-4","py-2","rounded-lg","bg-blue-600","text-white","hover:bg-blue-700","transition","disabled:opacity-60",3,"disabled"],[3,"value"]],template:function(t,i){if(t&1&&(n(0,"h2",0),a(1),o(),n(2,"form",1),c("ngSubmit",function(){return i.save()}),n(3,"div")(4,"label",2),a(5,"Subcategory Name"),o(),v(6,"input",3),u(7,Ft,3,1,"small",4),o(),n(8,"div")(9,"label",2),a(10,"Category"),o(),n(11,"select",5)(12,"option",6),a(13,"Select Category"),o(),u(14,kt,2,0)(15,Tt,2,0,"option",7),o(),u(16,It,2,0,"small",4),o(),n(17,"div",8)(18,"button",9),c("click",function(){return i.close.emit({updated:!1})}),a(19," Cancel "),o(),n(20,"button",10),u(21,Lt,1,1)(22,Vt,1,1),o()()()),t&2){let l,d;s(),x(" ",i.data?"Edit Subcategory":"Add Subcategory",`
`),s(),h("formGroup",i.form),s(5),p((l=i.form.get("name"))!=null&&l.touched&&((l=i.form.get("name"))!=null&&l.invalid)?7:-1),s(7),p(i.categories.length>0?14:15),s(2),p((d=i.form.get("category"))!=null&&d.touched&&((d=i.form.get("category"))!=null&&d.invalid)?16:-1),s(4),h("disabled",i.loading),s(),p(i.loading?21:22)}},dependencies:[C,q,A,Z,ee,U,Y,O,B,M,$],encapsulation:2})};var Pt=(r,e)=>e.id;function jt(r,e){r&1&&(n(0,"div",4),a(1," Loading subcategories... "),o())}function Nt(r,e){if(r&1){let t=S();n(0,"tr",12)(1,"td",13),a(2),o(),n(3,"td",14),a(4),o(),n(5,"td",15)(6,"button",16),c("click",function(){let l=f(t).$implicit,d=m(2);return g(d.openForm(l))}),a(7," \u270E "),o(),n(8,"button",17),c("click",function(){let l=f(t).$implicit,d=m(2);return g(d.delete(l.id))}),a(9," \u2716 "),o()()()}if(r&2){let t=e.$implicit,i=m(2);s(2),N(t.name),s(2),x(" ",i.getCategoryName(t)," ")}}function Dt(r,e){if(r&1&&(n(0,"div",5)(1,"table",8)(2,"thead",9)(3,"tr")(4,"th",10),a(5,"Name"),o(),n(6,"th",10),a(7,"Category"),o(),n(8,"th",11),a(9,"Actions"),o()()(),n(10,"tbody"),F(11,Nt,10,2,"tr",12,Pt),o()()()),r&2){let t=m();s(11),E(t.subcategories)}}function Ut(r,e){r&1&&(n(0,"div",6),a(1,"No subcategories found."),o())}function Ot(r,e){if(r&1){let t=S();n(0,"div",18),c("click",function(){f(t);let l=m();return g(l.closeForm())}),n(1,"div",19),c("click",function(l){return f(t),g(l.stopPropagation())}),n(2,"button",20),c("click",function(){f(t);let l=m();return g(l.closeForm())}),a(3," \xD7 "),o(),n(4,"app-subcategory-form",21),c("close",function(l){f(t);let d=m();return g(d.closeForm(l))}),o()()()}if(r&2){let t=m();s(4),h("data",t.selectedSubcategory)}}var Ce=class r{constructor(e,t){this.service=e;this.toast=t}subcategories=[];loading=!0;selectedSubcategory;showForm=!1;getCategoryName(e){return typeof e.category=="object"?e.category.name:e.category}ngOnInit(){this.loadSubcategories()}loadSubcategories(){this.loading=!0,this.service.getAll().subscribe({next:e=>{this.subcategories=e,this.loading=!1},error:()=>this.loading=!1})}openForm(e){this.selectedSubcategory=e,this.showForm=!0}closeForm(e){if(this.showForm=!1,!!e?.updated){if(this.selectedSubcategory){let t=this.subcategories.findIndex(i=>i.id===this.selectedSubcategory.id);t!==-1&&e.subcategory&&(this.subcategories[t]=e.subcategory)}else e.subcategory&&this.subcategories.unshift(e.subcategory);this.selectedSubcategory=void 0}}delete(e){confirm("Delete this subcategory?")&&this.service.delete(e).subscribe({next:()=>{this.subcategories=this.subcategories.filter(t=>t.id!==e),this.toast.show("Subcategory deleted successfully","success")},error:()=>this.toast.show("Failed to delete subcategory","error")})}static \u0275fac=function(t){return new(t||r)(b(ie),b(w))};static \u0275cmp=y({type:r,selectors:[["app-subcategory-list"]],decls:10,vars:4,consts:[[1,"flex","flex-col","h-full"],[1,"flex","items-center","justify-between","mb-6"],[1,"text-2xl","font-semibold","text-gray-800"],[1,"inline-flex","items-center","gap-2","bg-blue-600","text-white","px-4","py-2","rounded-lg","shadow-sm","hover:bg-blue-700","active:bg-blue-800","transition",3,"click"],[1,"flex-1","flex","items-center","justify-center","text-gray-500","text-sm"],[1,"overflow-x-auto","bg-white","rounded-lg","shadow","border","border-gray-100"],[1,"flex-1","flex","items-center","justify-center","text-gray-400"],[1,"fixed","inset-0","bg-black/50","flex","items-center","justify-center","z-50","backdrop-blur-sm"],[1,"min-w-full","text-sm","text-gray-700"],[1,"bg-gray-100","text-gray-600","text-xs","uppercase"],[1,"text-left","p-3"],[1,"text-right","p-3"],[1,"border-b","hover:bg-gray-50","transition"],[1,"p-3","font-medium","text-gray-800"],[1,"p-3","text-gray-600"],[1,"p-3","text-right","space-x-2"],["title","Edit",1,"inline-flex","items-center","justify-center","w-8","h-8","text-blue-600","hover:text-blue-800","rounded-md","hover:bg-blue-50",3,"click"],["title","Delete",1,"inline-flex","items-center","justify-center","w-8","h-8","text-red-600","hover:text-red-800","rounded-md","hover:bg-red-50",3,"click"],[1,"fixed","inset-0","bg-black/50","flex","items-center","justify-center","z-50","backdrop-blur-sm",3,"click"],[1,"bg-white","rounded-xl","shadow-xl","w-full","max-w-md","p-6","relative",3,"click"],[1,"absolute","top-3","right-4","text-gray-500","hover:text-gray-700","text-xl",3,"click"],[3,"close","data"]],template:function(t,i){t&1&&(n(0,"div",0)(1,"header",1)(2,"h2",2),a(3,"Subcategories"),o(),n(4,"button",3),c("click",function(){return i.openForm()}),a(5," + Add Subcategory "),o()(),u(6,jt,2,0,"div",4),u(7,Dt,13,0,"div",5),u(8,Ut,2,0,"div",6),u(9,Ot,5,1,"div",7),o()),t&2&&(s(6),p(i.loading?6:-1),s(),p(!i.loading&&i.subcategories.length>0?7:-1),s(),p(!i.loading&&i.subcategories.length===0?8:-1),s(),p(i.showForm?9:-1))},dependencies:[C,ye],encapsulation:2})};var re=class r{constructor(e){this.http=e}endpoint="coupons";getAll(){return this.http.get(this.endpoint)}create(e){return this.http.post(this.endpoint,e)}update(e,t){return this.http.put(`${this.endpoint}/${e}`,t)}delete(e){return this.http.delete(`${this.endpoint}/${e}`)}static \u0275fac=function(t){return new(t||r)(P(j))};static \u0275prov=V({token:r,factory:r.\u0275fac,providedIn:"root"})};function Bt(r,e){r&1&&(n(0,"p",4),a(1,"Name is required (min 2 chars)"),o())}function At(r,e){if(r&1&&(n(0,"div")(1,"label",2),a(2,"Coupon Name"),o(),v(3,"input",9),u(4,Bt,2,0,"p",4),o()),r&2){let t,i=m();s(4),p((t=i.form.get("name"))!=null&&t.touched&&((t=i.form.get("name"))!=null&&t.invalid)?4:-1)}}function Mt(r,e){r&1&&(n(0,"p",4),a(1," Discount must be between 1 and 100 "),o())}function $t(r,e){r&1&&(n(0,"p",4),a(1," Expiry date cannot be in the past "),o())}function Gt(r,e){if(r&1&&a(0),r&2){let t=m();x(" ",t.data?"Updating...":"Creating..."," ")}}function qt(r,e){if(r&1&&a(0),r&2){let t=m();x(" ",t.data?"Update":"Create"," ")}}var Se=class r{constructor(e,t,i){this.fb=e;this.service=t;this.toast=i;this.form=this.fb.group({name:["",[_.required,_.minLength(2)]],discount:[0,[_.required,_.min(1),_.max(100)]],expiryDate:["",[_.required,this.futureDateValidator]]});let l=new Date;this.minDate=l.toISOString().split("T")[0]}data;close=new L;form;loading=!1;minDate;ngOnInit(){this.data&&(this.form.patchValue({name:this.data.name,discount:this.data.discount,expiryDate:this.data.expiryDate.split("T")[0]}),this.form.get("name")?.disable())}futureDateValidator(e){let t=e.value;if(!t)return null;let i=new Date;return new Date(t)<new Date(i.toDateString())?{pastDate:!0}:null}save(){if(this.form.invalid){this.toast.show("Please fill all required fields correctly","error");return}this.loading=!0;let e=this.form.getRawValue();(this.data?this.service.update(this.data.id,e):this.service.create(e)).subscribe({next:i=>{this.toast.show(this.data?"Coupon updated successfully":"Coupon created successfully","success"),this.close.emit({updated:!0,coupon:i})},error:()=>{this.toast.show("Something went wrong","error"),this.loading=!1},complete:()=>this.loading=!1})}static \u0275fac=function(t){return new(t||r)(b(G),b(re),b(w))};static \u0275cmp=y({type:r,selectors:[["app-coupon-form"]],inputs:{data:"data"},outputs:{close:"close"},decls:20,vars:8,consts:[[1,"text-xl","font-semibold","mb-5","text-gray-800"],[1,"space-y-5",3,"ngSubmit","formGroup"],[1,"block","text-gray-700","mb-1"],["formControlName","discount","type","number","min","1","max","100","placeholder","Enter discount",1,"w-full","border","border-gray-300","rounded-lg","px-3","py-2","focus:ring-2","focus:ring-blue-500","outline-none"],[1,"text-red-500","text-sm","mt-1"],["formControlName","expiryDate","type","date",1,"w-full","border","border-gray-300","rounded-lg","px-3","py-2","focus:ring-2","focus:ring-blue-500","outline-none",3,"min"],[1,"flex","justify-end","gap-3","pt-5","border-t"],["type","button",1,"px-4","py-2","border","rounded-lg","hover:bg-gray-100","transition",3,"click"],["type","submit",1,"px-4","py-2","rounded-lg","bg-blue-600","text-white","hover:bg-blue-700","transition","disabled:opacity-60",3,"disabled"],["formControlName","name","type","text","placeholder","Enter coupon name",1,"w-full","border","border-gray-300","rounded-lg","px-3","py-2","focus:ring-2","focus:ring-blue-500","outline-none"]],template:function(t,i){if(t&1&&(n(0,"h2",0),a(1),o(),n(2,"form",1),c("ngSubmit",function(){return i.save()}),u(3,At,5,1,"div"),n(4,"div")(5,"label",2),a(6,"Discount (%)"),o(),v(7,"input",3),u(8,Mt,2,0,"p",4),o(),n(9,"div")(10,"label",2),a(11,"Expiry Date"),o(),v(12,"input",5),u(13,$t,2,0,"p",4),o(),n(14,"div",6)(15,"button",7),c("click",function(){return i.close.emit({updated:!1})}),a(16," Cancel "),o(),n(17,"button",8),u(18,Gt,1,1)(19,qt,1,1),o()()()),t&2){let l,d;s(),x(" ",i.data?"Edit Coupon":"Add Coupon",`
`),s(),h("formGroup",i.form),s(),p(i.data?-1:3),s(5),p((l=i.form.get("discount"))!=null&&l.touched&&((l=i.form.get("discount"))!=null&&l.invalid)?8:-1),s(4),h("min",i.minDate),s(),p((d=i.form.get("expiryDate"))!=null&&d.touched&&((d=i.form.get("expiryDate"))!=null&&d.hasError("pastDate"))?13:-1),s(4),h("disabled",i.form.invalid||i.loading),s(),p(i.loading?18:19)}},dependencies:[C,q,A,U,ue,O,B,pe,Je,M,$],encapsulation:2})};var Ht=(r,e)=>e.id;function Rt(r,e){r&1&&(n(0,"div",4),a(1," Loading coupons... "),o())}function zt(r,e){if(r&1){let t=S();n(0,"tr",12)(1,"td",13),a(2),o(),n(3,"td",14),a(4),o(),n(5,"td",14),a(6),X(7,"date"),o(),n(8,"td",15)(9,"button",16),c("click",function(){let l=f(t).$implicit,d=m(2);return g(d.openForm(l))}),a(10," \u270E "),o(),n(11,"button",17),c("click",function(){let l=f(t).$implicit,d=m(2);return g(d.delete(l.id))}),a(12," \u2716 "),o()()()}if(r&2){let t=e.$implicit;s(2),N(t.name),s(2),x("",t.discount,"%"),s(2),x(" ",me(7,3,t.expiryDate,"mediumDate")," ")}}function Wt(r,e){if(r&1&&(n(0,"div",5)(1,"table",8)(2,"thead",9)(3,"tr")(4,"th",10),a(5,"Name"),o(),n(6,"th",10),a(7,"Discount"),o(),n(8,"th",10),a(9,"Expiry Date"),o(),n(10,"th",11),a(11,"Actions"),o()()(),n(12,"tbody"),F(13,zt,13,6,"tr",12,Ht),o()()()),r&2){let t=m();s(13),E(t.coupons)}}function Qt(r,e){r&1&&(n(0,"div",6),a(1,"No coupons found."),o())}function Jt(r,e){if(r&1){let t=S();n(0,"div",18),c("click",function(){f(t);let l=m();return g(l.closeForm())}),n(1,"div",19),c("click",function(l){return f(t),g(l.stopPropagation())}),n(2,"button",20),c("click",function(){f(t);let l=m();return g(l.closeForm())}),a(3," \xD7 "),o(),n(4,"app-coupon-form",21),c("close",function(l){f(t);let d=m();return g(d.closeForm(l))}),o()()()}if(r&2){let t=m();s(4),h("data",t.selectedCoupon)}}var we=class r{constructor(e,t){this.service=e;this.toast=t}coupons=[];loading=!0;selectedCoupon;showForm=!1;ngOnInit(){this.loadCoupons()}loadCoupons(){this.loading=!0,this.service.getAll().subscribe({next:e=>{this.coupons=e,this.loading=!1},error:()=>{this.loading=!1,this.toast.show("Failed to load coupons","error")}})}openForm(e){this.selectedCoupon=e,this.showForm=!0}closeForm(e){if(this.showForm=!1,!!e?.updated){if(this.selectedCoupon){let t=this.coupons.findIndex(i=>i.id===this.selectedCoupon.id);t!==-1&&e.coupon&&(this.coupons[t]=e.coupon)}else e.coupon&&this.coupons.unshift(e.coupon);this.selectedCoupon=void 0}}delete(e){confirm("Delete this coupon?")&&this.service.delete(e).subscribe({next:()=>{this.coupons=this.coupons.filter(t=>t.id!==e),this.toast.show("Coupon deleted successfully","success")},error:()=>this.toast.show("Failed to delete coupon","error")})}static \u0275fac=function(t){return new(t||r)(b(re),b(w))};static \u0275cmp=y({type:r,selectors:[["app-coupon-list"]],decls:10,vars:4,consts:[[1,"flex","flex-col","h-full"],[1,"flex","items-center","justify-between","mb-6"],[1,"text-2xl","font-semibold","text-gray-800"],[1,"inline-flex","items-center","gap-2","bg-blue-600","text-white","px-4","py-2","rounded-lg","shadow-sm","hover:bg-blue-700","transition",3,"click"],[1,"flex-1","flex","items-center","justify-center","text-gray-500","text-sm"],[1,"overflow-x-auto","bg-white","rounded-lg","shadow","border","border-gray-100"],[1,"flex-1","flex","items-center","justify-center","text-gray-400"],[1,"fixed","inset-0","bg-black/50","flex","items-center","justify-center","z-50","backdrop-blur-sm"],[1,"min-w-full","text-sm","text-gray-700"],[1,"bg-gray-100","text-gray-600","text-xs","uppercase"],[1,"text-left","p-3"],[1,"text-right","p-3"],[1,"border-b","hover:bg-gray-50","transition"],[1,"p-3","font-medium","text-gray-800"],[1,"p-3","text-gray-600"],[1,"p-3","text-right","space-x-2"],["title","Edit",1,"inline-flex","items-center","justify-center","w-8","h-8","text-blue-600","hover:text-blue-800","rounded-md","hover:bg-blue-50",3,"click"],["title","Delete",1,"inline-flex","items-center","justify-center","w-8","h-8","text-red-600","hover:text-red-800","rounded-md","hover:bg-red-50",3,"click"],[1,"fixed","inset-0","bg-black/50","flex","items-center","justify-center","z-50","backdrop-blur-sm",3,"click"],[1,"bg-white","rounded-xl","shadow-xl","w-full","max-w-md","p-6","relative",3,"click"],[1,"absolute","top-3","right-4","text-gray-500","hover:text-gray-700","text-xl",3,"click"],[3,"close","data"]],template:function(t,i){t&1&&(n(0,"div",0)(1,"header",1)(2,"h2",2),a(3,"Coupons"),o(),n(4,"button",3),c("click",function(){return i.openForm()}),a(5," + Add Coupon "),o()(),u(6,Rt,2,0,"div",4),u(7,Wt,15,0,"div",5),u(8,Qt,2,0,"div",6),u(9,Jt,5,1,"div",7),o()),t&2&&(s(6),p(i.loading?6:-1),s(),p(!i.loading&&i.coupons.length>0?7:-1),s(),p(!i.loading&&i.coupons.length===0?8:-1),s(),p(i.showForm?9:-1))},dependencies:[C,Se,Ae],encapsulation:2})};var ne=class r{constructor(e){this.http=e}endpoint="products";getAll(){return this.http.get(this.endpoint)}create(e){return this.http.post(this.endpoint,e)}update(e,t){return this.http.put(`${this.endpoint}/${e}`,t)}delete(e){return this.http.delete(`${this.endpoint}/${e}`)}static \u0275fac=function(t){return new(t||r)(P(j))};static \u0275prov=V({token:r,factory:r.\u0275fac,providedIn:"root"})};var Ze=(r,e)=>e.id;function Kt(r,e){if(r&1&&(n(0,"option",10),a(1),o()),r&2){let t=e.$implicit;h("value",t.id),s(),N(t.name)}}function Xt(r,e){if(r&1&&(n(0,"option",10),a(1),o()),r&2){let t=e.$implicit;h("value",t.id),s(),N(t.name)}}function Yt(r,e){if(r&1){let t=S();n(0,"label",15)(1,"input",24),c("change",function(l){let d=f(t).$implicit,z=m();return g(z.toggleColor(d,l))}),o(),v(2,"span",25),n(3,"span",26),a(4),o()()}if(r&2){let t=e.$implicit,i=m();s(),h("checked",i.colorsArray.value.includes(t)),s(),Ne("background-color",t),s(2),N(t)}}function Zt(r,e){if(r&1&&v(0,"img",17),r&2){let t=m();h("src",t.imageCoverPreview,T)}}function ei(r,e){if(r&1){let t=S();n(0,"div",20),v(1,"img",27),n(2,"button",28),c("click",function(){let l=f(t).$index,d=m();return g(d.removeImage(l))}),a(3," \xD7 "),o()()}if(r&2){let t=e.$implicit;s(),h("src",t,T)}}var Fe=class r{constructor(e,t,i,l,d){this.fb=e;this.categoryService=t;this.brandService=i;this.productService=l;this.toast=d}data;close=new L;form;categories=[];brands=[];colorOptions=["red","green","blue","black","white","yellow","gray"];loading=!1;imagePreviews=[];imageCoverPreview=null;onImageCoverSelected(e){let t=e.target;if(t.files&&t.files[0]){let i=t.files[0];this.form.patchValue({imageCover:i});let l=new FileReader;l.onload=()=>this.imageCoverPreview=l.result,l.readAsDataURL(i)}}onImagesSelected(e){let t=e.target;if(!t.files?.length)return;let i=Array.from(t.files);this.form.patchValue({images:i}),this.imagePreviews=[],i.forEach(l=>{let d=new FileReader;d.onload=z=>{let J=z.target?.result;this.imagePreviews.push(J)},d.readAsDataURL(l)})}removeImage(e){let t=this.form.value.images;t.splice(e,1),this.imagePreviews.splice(e,1),this.form.patchValue({images:t})}ngOnInit(){this.initForm(),this.loadOptions(),this.data&&this.patchFormData()}initForm(){this.form=this.fb.group({title:["",[_.required,_.minLength(3)]],description:["",[_.required,_.minLength(20)]],price:[null,[_.required,_.min(.01)]],quantity:[1,[_.required,_.min(1)]],category:["",_.required],brand:[""],colors:this.fb.array([]),imageCover:this.data?[""]:["",_.required],images:[[]]})}get colorsArray(){return this.form.get("colors")}toggleColor(e,t){let i=t.target.checked,l=this.colorsArray;if(i)l.push(new Ie(e));else{let d=l.controls.findIndex(z=>z.value===e);d>=0&&l.removeAt(d)}}loadOptions(){this.categoryService.getAll().subscribe(e=>this.categories=e),this.brandService.getAll().subscribe(e=>this.brands=e)}patchFormData(){let e=typeof this.data.category=="object"?this.data.category.id:this.data.category,t=typeof this.data.brand=="object"?this.data.brand.id:this.data.brand;this.form.patchValue({title:this.data.title,description:this.data.description,price:this.data.price,quantity:this.data.quantity,category:e,brand:t||"",imageCover:"",images:[]}),this.imageCoverPreview=this.data.imageCoverUrl||null,this.imagePreviews=Array.isArray(this.data.imageUrls)?[...this.data.imageUrls]:[],this.colorsArray.clear(),Array.isArray(this.data.colors)&&this.data.colors.forEach(i=>this.colorsArray.push(new Ie(i)))}onSubmit(){if(this.form.invalid){this.form.markAllAsTouched(),this.toast.show("Please fix validation errors before saving.","error");return}this.loading=!0;let e=new FormData;Object.entries(this.form.value).forEach(([i,l])=>{i==="images"&&Array.isArray(l)?l.forEach(d=>{d instanceof File&&e.append("images",d)}):i==="imageCover"?l instanceof File&&e.append("imageCover",l):l!=null&&e.append(i,l)}),(this.data?this.productService.update(this.data.id,e):this.productService.create(e)).subscribe({next:i=>{this.toast.show(this.data?"Product updated successfully!":"Product created successfully!","success"),this.imageCoverPreview=i.imageCoverUrl||null,this.imagePreviews=i.imageUrls||[],this.loading=!1,this.close.emit({updated:!0,product:i})},error:()=>{this.toast.show(this.data?"Failed to update product":"Failed to create product","error"),this.loading=!1}})}ngOnDestroy(){this.imageCoverPreview=null,this.imagePreviews=[],this.form.reset()}static \u0275fac=function(t){return new(t||r)(b(G),b(H),b(W),b(ne),b(w))};static \u0275cmp=y({type:r,selectors:[["app-product-form"]],inputs:{data:"data"},outputs:{close:"close"},decls:60,vars:5,consts:[[1,"text-xl","font-semibold","mb-4"],[1,"space-y-4",3,"ngSubmit","formGroup"],[1,"block","text-gray-600","mb-1"],["formControlName","title","type","text","placeholder","Product title",1,"w-full","border","border-gray-300","rounded-lg","px-3","py-2","focus:ring-2","focus:ring-blue-500","outline-none"],["formControlName","description","rows","3","placeholder","Product description",1,"w-full","border","border-gray-300","rounded-lg","px-3","py-2","focus:ring-2","focus:ring-blue-500","outline-none","resize-none"],[1,"grid","grid-cols-2","gap-4"],["type","number","formControlName","price","min","0.01","step","0.01",1,"w-full","border","border-gray-300","rounded-lg","px-3","py-2","focus:ring-2","focus:ring-blue-500","outline-none"],["type","number","formControlName","quantity","min","1","step","1",1,"w-full","border","border-gray-300","rounded-lg","px-3","py-2","focus:ring-2","focus:ring-blue-500","outline-none"],["formControlName","category",1,"w-full","border","border-gray-300","rounded-lg","px-3","py-2","focus:ring-2","focus:ring-blue-500","outline-none","bg-white"],["value","","disabled","","selected",""],[3,"value"],["formControlName","brand",1,"w-full","border","border-gray-300","rounded-lg","px-3","py-2","focus:ring-2","focus:ring-blue-500","outline-none","bg-white"],["value",""],[1,"block","text-gray-600","mb-2"],[1,"flex","flex-wrap","gap-3"],[1,"flex","items-center","gap-2","cursor-pointer"],["type","file","accept","image/*","required","",1,"block","w-full","text-sm","text-gray-500","file:mr-4","file:py-2","file:px-4","file:rounded-lg","file:border-0","file:text-sm","file:font-semibold","file:bg-blue-50","file:text-blue-700","hover:file:bg-blue-100",3,"change"],[1,"mt-3","w-24","h-24","object-cover","rounded-lg","border",3,"src"],["type","file","multiple","","accept","image/*",1,"block","w-full","text-sm","text-gray-500","file:mr-4","file:py-2","file:px-4","file:rounded-lg","file:border-0","file:text-sm","file:font-semibold","file:bg-blue-50","file:text-blue-700","hover:file:bg-blue-100",3,"change"],[1,"mt-3","flex","flex-wrap","gap-3"],[1,"relative","group"],[1,"flex","justify-end","space-x-3","pt-4","border-t"],["type","button",1,"px-4","py-2","border","rounded-lg","hover:bg-gray-100","transition",3,"click"],["type","submit",1,"relative","px-4","py-2","rounded-lg","bg-blue-600","text-white","hover:bg-blue-700","transition","disabled:opacity-60",3,"disabled"],["type","checkbox",1,"accent-blue-600","rounded","border-gray-300","w-4","h-4",3,"change","checked"],[1,"w-5","h-5","rounded","border","border-gray-300"],[1,"text-sm","text-gray-700","capitalize"],["alt","Preview",1,"w-20","h-20","object-cover","rounded-lg","border","border-gray-200",3,"src"],["type","button",1,"absolute","top-1","right-1","bg-black/50","text-white","rounded-full","p-0.5","opacity-0","group-hover:opacity-100","transition",3,"click"]],template:function(t,i){t&1&&(n(0,"h2",0),a(1),o(),n(2,"form",1),c("ngSubmit",function(){return i.onSubmit()}),n(3,"div")(4,"label",2),a(5,"Title *"),o(),v(6,"input",3),o(),n(7,"div")(8,"label",2),a(9,"Description *"),o(),v(10,"textarea",4),o(),n(11,"div",5)(12,"div")(13,"label",2),a(14,"Price (EGP) *"),o(),v(15,"input",6),o(),n(16,"div")(17,"label",2),a(18,"Quantity *"),o(),v(19,"input",7),o()(),n(20,"div",5)(21,"div")(22,"label",2),a(23,"Category *"),o(),n(24,"select",8)(25,"option",9),a(26,"Select category"),o(),F(27,Kt,2,2,"option",10,Ze),o()(),n(29,"div")(30,"label",2),a(31,"Brand"),o(),n(32,"select",11)(33,"option",12),a(34,"Select brand"),o(),F(35,Xt,2,2,"option",10,Ze),o()()(),n(37,"div")(38,"label",13),a(39,"Colors"),o(),n(40,"div",14),F(41,Yt,5,4,"label",15,je),o()(),n(43,"div")(44,"label",2),a(45,"Image Cover *"),o(),n(46,"input",16),c("change",function(d){return i.onImageCoverSelected(d)}),o(),u(47,Zt,1,1,"img",17),o(),n(48,"div")(49,"label",2),a(50,"Additional Images"),o(),n(51,"input",18),c("change",function(d){return i.onImagesSelected(d)}),o(),n(52,"div",19),F(53,ei,4,1,"div",20,Pe),o()(),n(55,"div",21)(56,"button",22),c("click",function(){return i.close.emit()}),a(57," Cancel "),o(),n(58,"button",23),a(59),o()()()),t&2&&(s(),x(" ",i.data?"Edit Product":"Add Product",`
`),s(),h("formGroup",i.form),s(25),E(i.categories),s(8),E(i.brands),s(6),E(i.colorOptions),s(6),p(i.imageCoverPreview?47:-1),s(6),E(i.imagePreviews),s(5),h("disabled",i.loading||i.form.invalid),s(),x(" ",i.loading?i.data?"Updating...":"Creating...":i.data?"Update":"Create"," "))},dependencies:[C,q,A,Z,ee,U,ue,Y,O,B,pe,M,$],encapsulation:2})};var ti=(r,e)=>e.id;function ii(r,e){r&1&&(n(0,"div",4),a(1," Loading products... "),o())}function ri(r,e){r&1&&(n(0,"p",5),a(1,"No products found."),o())}function ni(r,e){if(r&1){let t=S();n(0,"tr",12)(1,"td",13),v(2,"img",14),o(),n(3,"td",15),a(4),o(),n(5,"td",16),a(6),o(),n(7,"td",16),a(8),o(),n(9,"td",17),a(10),X(11,"number"),o(),n(12,"td",17),a(13),o(),n(14,"td",18)(15,"button",19),c("click",function(){let l=f(t).$implicit,d=m(2);return g(d.openForm(l))}),I(),n(16,"svg",20),v(17,"path",21),o()(),Q(),n(18,"button",22),c("click",function(){let l=f(t).$implicit,d=m(2);return g(d.delete(l.id))}),I(),n(19,"svg",20),v(20,"path",23),o()()()()}if(r&2){let t=e.$implicit;s(2),h("src",t.imageCoverUrl||"/assets/placeholder.png",T),s(2),x(" ",t.title," "),s(2),x(" ",typeof t.category=="string"?t.category:t.category.name," "),s(2),x(" ",typeof t.brand=="string"?t.brand:t.brand.name," "),s(2),x(" ",me(11,6,t.price,"1.2-2")," "),s(3),x(" ",t.quantity," ")}}function oi(r,e){if(r&1&&(n(0,"div",6)(1,"table",8)(2,"thead",9)(3,"tr")(4,"th",10),a(5,"Image Cover"),o(),n(6,"th",10),a(7,"Title"),o(),n(8,"th",10),a(9,"Category"),o(),n(10,"th",10),a(11,"Brand"),o(),n(12,"th",10),a(13,"Price (EGP)"),o(),n(14,"th",10),a(15,"Quantity"),o(),n(16,"th",11),a(17,"Actions"),o()()(),n(18,"tbody"),F(19,ni,21,9,"tr",12,ti),o()()()),r&2){let t=m();s(19),E(t.products)}}function ai(r,e){if(r&1){let t=S();n(0,"div",24),c("click",function(){f(t);let l=m();return g(l.closeForm())}),n(1,"div",25),c("click",function(l){return f(t),g(l.stopPropagation())}),n(2,"button",26),c("click",function(){f(t);let l=m();return g(l.closeForm())}),a(3," \xD7 "),o(),n(4,"app-product-form",27),c("close",function(l){f(t);let d=m();return g(d.closeForm(l))}),o()()()}if(r&2){let t=m();s(4),h("data",t.selectedProduct)}}var Ee=class r{constructor(e,t,i,l){this.service=e;this.toast=t;this.categoryService=i;this.brandService=l}products=[];categories=[];brands=[];loading=!0;showForm=!1;selectedProduct;ngOnInit(){this.loadProducts(),this.loadRelations()}loadProducts(){this.loading=!0,this.service.getAll().subscribe({next:e=>{this.products=e,this.loading=!1},error:()=>{this.toast.show("Failed to load products","error"),this.loading=!1}})}loadRelations(){this.categoryService.getAll().subscribe(e=>this.categories=e),this.brandService.getAll().subscribe(e=>this.brands=e)}openForm(e){this.selectedProduct=e,this.showForm=!0}closeForm(e){if(this.showForm=!1,!!e?.updated){if(this.selectedProduct&&e.product){let t=this.products.findIndex(i=>i.id===this.selectedProduct.id);t!==-1&&(this.products[t]=e.product)}else e.product&&this.products.unshift(e.product);this.selectedProduct=void 0}}delete(e){confirm("Are you sure you want to delete this product?")&&this.service.delete(e).subscribe({next:()=>{this.products=this.products.filter(t=>t.id!==e),this.toast.show("Product deleted successfully","success")},error:()=>this.toast.show("Failed to delete product","error")})}static \u0275fac=function(t){return new(t||r)(b(ne),b(w),b(H),b(W))};static \u0275cmp=y({type:r,selectors:[["app-product-list"]],decls:10,vars:2,consts:[[1,"flex","flex-col","h-full"],[1,"flex","justify-between","items-center","mb-6"],[1,"text-2xl","font-semibold","text-gray-800"],[1,"bg-blue-600","text-white","px-4","py-2","rounded-lg","hover:bg-blue-700","transition",3,"click"],[1,"flex-1","flex","items-center","justify-center","text-gray-500","text-sm"],[1,"text-center","text-gray-500"],[1,"overflow-x-auto","bg-white","rounded-lg","shadow","border","border-gray-100"],[1,"fixed","inset-0","bg-black/50","flex","items-center","justify-center","z-50","backdrop-blur-sm","transition-opacity","duration-300","animate-fade-in"],[1,"min-w-full","text-sm","text-gray-700","table-auto","sm:table-fixed"],[1,"bg-gray-100","text-gray-600","text-xs","uppercase"],[1,"text-left","p-3"],[1,"text-right","p-3"],[1,"hover:bg-gray-50"],[1,"px-4","py-3","border-b"],["alt","product",1,"w-14","h-14","object-cover","rounded-md","border",3,"src"],[1,"px-4","py-3","border-b","font-medium","text-gray-800"],[1,"px-4","py-3","border-b","text-gray-600"],[1,"px-4","py-3","border-b","text-gray-700"],[1,"p-3","text-right","space-x-2","border-b","text-gray-700"],["title","Edit",1,"inline-flex","items-center","justify-center","w-8","h-8","text-blue-600","hover:text-blue-800","rounded-md","hover:bg-blue-50","transition-colors",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15.232 5.232a2.5 2.5 0 113.536 3.536L8.5 19.036l-4 1 1-4 10.732-10.804z"],["title","Delete",1,"inline-flex","items-center","justify-center","w-8","h-8","text-red-600","hover:text-red-800","rounded-md","hover:bg-red-50","transition-colors",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"fixed","inset-0","bg-black/50","flex","items-center","justify-center","z-50","backdrop-blur-sm","transition-opacity","duration-300","animate-fade-in",3,"click"],[1,"bg-white","rounded-2xl","shadow-2xl","w-full","max-w-4xl","max-h-[90vh]","p-6","relative","overflow-y-auto","transform","transition-all","duration-300","animate-slide-up",3,"click"],[1,"absolute","top-3","right-4","text-gray-500","hover:text-gray-700","text-2xl",3,"click"],[3,"close","data"]],template:function(t,i){t&1&&(n(0,"div",0)(1,"div",1)(2,"h2",2),a(3,"Products"),o(),n(4,"button",3),c("click",function(){return i.openForm()}),a(5," + Add Product "),o()(),u(6,ii,2,0,"div",4)(7,ri,2,0,"p",5)(8,oi,21,0,"div",6),u(9,ai,5,1,"div",7),o()),t&2&&(s(6),p(i.loading?6:i.products.length?8:7),s(3),p(i.showForm?9:-1))},dependencies:[C,Fe,Me],encapsulation:2})};var oe=class r{constructor(e){this.http=e}endpoint="users";getAll(){return this.http.get(this.endpoint)}create(e){return this.http.post(this.endpoint,e)}update(e,t){return this.http.put(`${this.endpoint}/${e}`,t)}delete(e){return this.http.delete(`${this.endpoint}/${e}`)}static \u0275fac=function(t){return new(t||r)(P(j))};static \u0275prov=V({token:r,factory:r.\u0275fac,providedIn:"root"})};function li(r,e){r&1&&(n(0,"small",4),a(1,"First name must be at least 3 characters."),o())}function si(r,e){r&1&&(n(0,"small",4),a(1,"Last name must be at least 3 characters."),o())}function ci(r,e){r&1&&(n(0,"small",4),a(1,"Please enter a valid email."),o())}function di(r,e){r&1&&(n(0,"small",4),a(1,"Enter a valid phone number."),o())}function mi(r,e){r&1&&(n(0,"small",4),a(1,"Role is required."),o())}function ui(r,e){r&1&&(n(0,"small",4),a(1,"Password must be at least 6 characters."),o())}function pi(r,e){if(r&1&&(n(0,"div")(1,"label",2),a(2,"Password"),o(),v(3,"input",17),u(4,ui,2,0,"small",4),o()),r&2){let t,i=m();s(4),p((t=i.form.get("password"))!=null&&t.invalid&&((t=i.form.get("password"))!=null&&t.touched)?4:-1)}}function fi(r,e){if(r&1&&v(0,"img",13),r&2){let t=m();h("src",t.profileImagePreview,T)}}var ke=class r{constructor(e,t,i){this.fb=e;this.service=t;this.toast=i;this.form=this.fb.group({firstName:["",[_.required,_.minLength(3)]],lastName:["",[_.required,_.minLength(3)]],email:["",[_.required,_.email]],phone:["",[_.required,_.pattern(/^(01)[0-9]{9}$/)]],role:["",_.required],profileImage:[""],password:[""]})}data;close=new L;form;imageFile;profileImagePreview;loading=!1;ngOnInit(){this.data?(this.form.patchValue({firstName:this.data.firstName,lastName:this.data.lastName,email:this.data.email,phone:this.data.phone,role:this.data.role}),this.profileImagePreview=this.data.profileImageUrl,this.form.removeControl("password")):this.form.get("password")?.setValidators([_.required,_.minLength(6)])}onFileChange(e){let t=e.target;if(t.files?.length){this.imageFile=t.files[0];let i=new FileReader;i.onload=()=>this.profileImagePreview=i.result,i.readAsDataURL(this.imageFile),this.form.patchValue({profileImage:this.imageFile})}}save(){if(this.form.invalid){this.form.markAllAsTouched();return}this.loading=!0;let e=new FormData;Object.entries(this.form.value).forEach(([i,l])=>{i==="profileImage"&&this.imageFile?e.append("profileImage",this.imageFile):i==="profileImage"?l instanceof File&&e.append("profileImage",l):l!=null&&e.append(i,l)}),e.append("passwordConfirm",this.form.value.password),(this.data?this.service.update(this.data.id,e):this.service.create(e)).subscribe({next:i=>{this.toast.show(this.data?"User updated successfully":"User created successfully","success"),this.close.emit({updated:!0,user:i})},error:()=>{this.loading=!1,this.toast.show("Something went wrong","error")},complete:()=>this.loading=!1})}static \u0275fac=function(t){return new(t||r)(b(G),b(oe),b(w))};static \u0275cmp=y({type:r,selectors:[["app-user-form"]],inputs:{data:"data"},outputs:{close:"close"},decls:45,vars:11,consts:[[1,"text-xl","font-semibold","mb-4"],[1,"space-y-4",3,"ngSubmit","formGroup"],[1,"block","text-gray-600","mb-1"],["formControlName","firstName","type","text","placeholder","Enter first name",1,"w-full","border","rounded-lg","px-3","py-2","focus:ring-2","focus:ring-blue-500","outline-none"],[1,"text-red-500"],["formControlName","lastName","type","text","placeholder","Enter last name",1,"w-full","border","rounded-lg","px-3","py-2","focus:ring-2","focus:ring-blue-500","outline-none"],["formControlName","email","type","email","placeholder","Enter email",1,"w-full","border","rounded-lg","px-3","py-2","focus:ring-2","focus:ring-blue-500","outline-none"],["formControlName","phone","type","tel","placeholder","Enter phone number",1,"w-full","border","rounded-lg","px-3","py-2","focus:ring-2","focus:ring-blue-500","outline-none"],["formControlName","role",1,"w-full","border","rounded-lg","px-3","py-2","focus:ring-2","focus:ring-blue-500","outline-none","bg-white"],["value","","disabled",""],["value","user"],["value","admin"],["type","file",1,"block","w-full","text-sm","text-gray-500","file:mr-4","file:py-2","file:px-4","file:rounded-lg","file:border-0","file:text-sm","file:font-semibold","file:bg-blue-50","file:text-blue-700","hover:file:bg-blue-100",3,"change"],[1,"mt-3","w-24","h-24","object-cover","rounded-lg","border",3,"src"],[1,"flex","justify-end","space-x-3","pt-4","border-t"],["type","button",1,"px-4","py-2","border","rounded-lg","hover:bg-gray-100","transition",3,"click"],["type","submit",1,"relative","px-4","py-2","rounded-lg","bg-blue-600","text-white","hover:bg-blue-700","transition","disabled:opacity-60",3,"disabled"],["formControlName","password","type","password","placeholder","Enter password",1,"w-full","border","rounded-lg","px-3","py-2","focus:ring-2","focus:ring-blue-500","outline-none"]],template:function(t,i){if(t&1&&(n(0,"h2",0),a(1),o(),n(2,"form",1),c("ngSubmit",function(){return i.save()}),n(3,"div")(4,"label",2),a(5,"First Name"),o(),v(6,"input",3),u(7,li,2,0,"small",4),o(),n(8,"div")(9,"label",2),a(10,"Last Name"),o(),v(11,"input",5),u(12,si,2,0,"small",4),o(),n(13,"div")(14,"label",2),a(15,"Email"),o(),v(16,"input",6),u(17,ci,2,0,"small",4),o(),n(18,"div")(19,"label",2),a(20,"Phone"),o(),v(21,"input",7),u(22,di,2,0,"small",4),o(),n(23,"div")(24,"label",2),a(25,"Role"),o(),n(26,"select",8)(27,"option",9),a(28,"Select role"),o(),n(29,"option",10),a(30,"User"),o(),n(31,"option",11),a(32,"Admin"),o()(),u(33,mi,2,0,"small",4),o(),u(34,pi,5,1,"div"),n(35,"div")(36,"label",2),a(37,"Profile Image"),o(),n(38,"input",12),c("change",function(d){return i.onFileChange(d)}),o(),u(39,fi,1,1,"img",13),o(),n(40,"div",14)(41,"button",15),c("click",function(){return i.close.emit({updated:!1})}),a(42," Cancel "),o(),n(43,"button",16),a(44),o()()()),t&2){let l,d,z,J,de;s(),x(" ",i.data?"Edit User":"Add User",`
`),s(),h("formGroup",i.form),s(5),p((l=i.form.get("firstName"))!=null&&l.invalid&&((l=i.form.get("firstName"))!=null&&l.touched)?7:-1),s(5),p((d=i.form.get("lastName"))!=null&&d.invalid&&((d=i.form.get("lastName"))!=null&&d.touched)?12:-1),s(5),p((z=i.form.get("email"))!=null&&z.invalid&&((z=i.form.get("email"))!=null&&z.touched)?17:-1),s(5),p((J=i.form.get("phone"))!=null&&J.invalid&&((J=i.form.get("phone"))!=null&&J.touched)?22:-1),s(11),p((de=i.form.get("role"))!=null&&de.invalid&&((de=i.form.get("role"))!=null&&de.touched)?33:-1),s(),p(i.data?-1:34),s(5),p(i.profileImagePreview?39:-1),s(4),h("disabled",i.loading),s(),x(" ",i.loading?i.data?"Updating...":"Creating...":i.data?"Update":"Create"," ")}},dependencies:[C,q,A,Z,ee,U,Y,O,B,M,$],encapsulation:2})};var gi=(r,e)=>e.id;function bi(r,e){r&1&&(n(0,"div",6),a(1,"Loading users..."),o())}function hi(r,e){if(r&1){let t=S();n(0,"tr",14)(1,"td",15),v(2,"img",16),o(),n(3,"td",17),a(4),o(),n(5,"td",17),a(6),o(),n(7,"td",17),a(8),o(),n(9,"td",17),a(10),X(11,"uppercase"),o(),n(12,"td",17),a(13),o(),n(14,"td",18)(15,"button",19),c("click",function(){let l=f(t).$implicit,d=m(2);return g(d.openForm(l))}),I(),n(16,"svg",4),v(17,"path",20),o()(),Q(),n(18,"button",21),c("click",function(){let l=f(t).$implicit,d=m(2);return g(d.delete(l.id))}),I(),n(19,"svg",4),v(20,"path",22),o()()()()}if(r&2){let t=e.$implicit;s(2),h("src",t.profileImageUrl,T),s(2),x(" ",`${t.firstName} ${t.lastName}`," "),s(2),x(" ",t.email," "),s(2),x(" ",t.phone," "),s(2),x(" ",Ue(11,6,t.role)," "),s(3),x(" ",t.active?"Active":"Inactive"," ")}}function vi(r,e){if(r&1&&(n(0,"div",7)(1,"table",10)(2,"thead",11)(3,"tr")(4,"th",12),a(5,"Profile Image"),o(),n(6,"th",12),a(7,"Full Name"),o(),n(8,"th",12),a(9,"Email"),o(),n(10,"th",12),a(11,"Phone"),o(),n(12,"th",12),a(13,"Role"),o(),n(14,"th",12),a(15,"Status"),o(),n(16,"th",13),a(17,"Actions"),o()()(),n(18,"tbody"),F(19,hi,21,8,"tr",14,gi),o()()()),r&2){let t=m();s(19),E(t.users)}}function xi(r,e){r&1&&(n(0,"div",8),a(1,"No users found."),o())}function _i(r,e){if(r&1){let t=S();n(0,"div",23),c("click",function(){f(t);let l=m();return g(l.closeForm())}),n(1,"div",24),c("click",function(l){return f(t),g(l.stopPropagation())}),n(2,"button",25),c("click",function(){f(t);let l=m();return g(l.closeForm())}),a(3," \xD7 "),o(),n(4,"app-user-form",26),c("close",function(l){f(t);let d=m();return g(d.closeForm(l))}),o()()()}if(r&2){let t=m();s(4),h("data",t.selectedUser)}}var Te=class r{constructor(e,t){this.service=e;this.toast=t}users=[];loading=!0;selectedUser;showForm=!1;ngOnInit(){this.loadUsers()}loadUsers(){this.loading=!0,this.service.getAll().subscribe({next:e=>{this.users=e,this.loading=!1},error:()=>this.loading=!1})}openForm(e){this.selectedUser=e,this.showForm=!0}closeForm(e){if(this.showForm=!1,!!e?.updated){if(this.selectedUser){let t=this.users.findIndex(i=>i.id===this.selectedUser.id);t!==-1&&e.user&&(this.users[t]=e.user)}else e.user&&this.users.unshift(e.user);this.selectedUser=void 0}}delete(e){confirm("Delete this user?")&&this.service.delete(e).subscribe({next:()=>{this.users=this.users.filter(t=>t.id!==e),this.toast.show("User deleted successfully","success")},error:()=>this.toast.show("Failed to delete user","error")})}static \u0275fac=function(t){return new(t||r)(b(oe),b(w))};static \u0275cmp=y({type:r,selectors:[["app-user-list"]],decls:12,vars:4,consts:[[1,"flex","flex-col","h-full"],[1,"flex","items-center","justify-between","mb-6"],[1,"text-2xl","font-semibold","text-gray-800"],[1,"inline-flex","items-center","gap-2","bg-blue-600","text-white","px-4","py-2","rounded-lg","shadow-sm","hover:bg-blue-700","active:bg-blue-800","transition-colors","duration-200",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4v16m8-8H4"],[1,"flex-1","flex","items-center","justify-center","text-gray-500","text-sm"],[1,"overflow-x-auto","bg-white","rounded-lg","shadow","border","border-gray-100"],[1,"flex-1","flex","items-center","justify-center","text-gray-400"],[1,"fixed","inset-0","bg-black/50","flex","items-center","justify-center","z-50","backdrop-blur-sm","transition-opacity","duration-300","animate-fade-in"],[1,"min-w-full","text-sm","text-gray-700"],[1,"bg-gray-100","text-gray-600","text-xs","uppercase"],[1,"text-left","p-3"],[1,"text-right","p-3"],[1,"border-b","hover:bg-gray-50","transition-colors","duration-150"],[1,"p-3"],["alt","User profile image",1,"w-12","h-12","object-cover","rounded-md","border","border-gray-200",3,"src"],[1,"p-3","font-medium","text-gray-800"],[1,"p-3","text-right","space-x-2"],["title","Edit",1,"inline-flex","items-center","justify-center","w-8","h-8","text-blue-600","hover:text-blue-800","rounded-md","hover:bg-blue-50","transition-colors",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15.232 5.232a2.5 2.5 0 113.536 3.536L8.5 19.036l-4 1 1-4 10.732-10.804z"],["title","Delete",1,"inline-flex","items-center","justify-center","w-8","h-8","text-red-600","hover:text-red-800","rounded-md","hover:bg-red-50","transition-colors",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"fixed","inset-0","bg-black/50","flex","items-center","justify-center","z-50","backdrop-blur-sm","transition-opacity","duration-300","animate-fade-in",3,"click"],[1,"bg-white","rounded-2xl","shadow-2xl","w-full","max-w-4xl","max-h-[90vh]","p-6","relative","overflow-y-auto","transform","transition-all","duration-300","animate-slide-up",3,"click"],[1,"absolute","top-3","right-4","text-gray-500","hover:text-gray-700","text-2xl",3,"click"],[3,"close","data"]],template:function(t,i){t&1&&(n(0,"div",0)(1,"header",1)(2,"h2",2),a(3,"Users"),o(),n(4,"button",3),c("click",function(){return i.openForm()}),I(),n(5,"svg",4),v(6,"path",5),o(),a(7," Add User "),o()(),u(8,bi,2,0,"div",6),u(9,vi,21,0,"div",7),u(10,xi,2,0,"div",8),u(11,_i,5,1,"div",9),o()),t&2&&(s(8),p(i.loading?8:-1),s(),p(!i.loading&&i.users.length>0?9:-1),s(),p(!i.loading&&i.users.length===0?10:-1),s(),p(i.showForm?11:-1))},dependencies:[C,ke,Be],encapsulation:2})};var _n=[{path:"",component:ge,children:[{path:"",redirectTo:"brands",pathMatch:"full"},{path:"brands",component:ve},{path:"categories",component:_e},{path:"subcategories",component:Ce},{path:"coupons",component:we},{path:"products",component:Ee},{path:"users",component:Te},{path:"**",redirectTo:"brands"}]}];export{_n as ADMIN_ROUTES};
