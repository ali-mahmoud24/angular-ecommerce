<section class="py-10">
    <div *ngIf="loading" class="flex justify-center py-20">
        <p class="text-gray-500 text-lg">Loading product details...</p>
    </div>

    <div *ngIf="!loading && product" class="max-w-6xl mx-auto grid grid-cols-1 md:grid-cols-2 gap-10 px-4">
        <!-- Left: Images -->
        <div>
            <!-- Main Image -->
            <div class="border rounded-xl overflow-hidden mb-4">
                <img [src]="selectedImage" [alt]="product.title" class="w-full h-96 object-cover" />
            </div>

            <!-- Thumbnails -->
            <div class="flex space-x-3 overflow-x-auto pb-2" *ngIf="product.imageUrls?.length">
                <img *ngFor="let img of product.imageUrls" [src]="img" (click)="selectImage(img)"
                    class="h-20 w-20 object-cover rounded-md border cursor-pointer hover:opacity-80 transition"
                    [class.border-blue-500]="img === selectedImage" />
            </div>
        </div>

        <!-- Right: Info -->
        <div class="flex flex-col">
            <h2 class="text-3xl font-semibold text-gray-800 mb-4">{{ product.title }}</h2>
            <p class="text-gray-600 mb-4 leading-relaxed">{{ product.description }}</p>
            <p class="text-2xl text-blue-600 font-semibold mb-4">${{ product.price | number: '1.0-2' }}</p>
            <p class="text-sm text-gray-500 mb-6">
                Category:
                <span class="font-medium text-gray-700">{{ product.category?.name || 'Uncategorized' }}</span>
            </p>

            <!-- Color Selection -->
            <label class="text-sm font-medium text-gray-700 mb-1">Color:</label>
            <select [(ngModel)]="selectedColor"
                class="mb-3 border border-gray-300 rounded px-3 py-2 focus:ring-2 focus:ring-blue-400 focus:outline-none">
                <option *ngFor="let c of product.colors" [value]="c">{{ c }}</option>
            </select>

            <!-- Quantity Input -->
            <label class="text-sm font-medium text-gray-700 mb-1">Quantity:</label>
            <input type="number" [(ngModel)]="quantity" min="1"
                class="mb-6 border border-gray-300 rounded px-3 py-2 focus:ring-2 focus:ring-blue-400 focus:outline-none w-24" />

            <!-- Add to Cart Button -->
            <button (click)="addToCart()" [disabled]="addingToCart"
                class="bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition flex justify-center items-center font-semibold w-full sm:w-auto">
                <span *ngIf="!addingToCart">Add to Cart</span>
                <svg *ngIf="addingToCart" class="animate-spin h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg"
                    fill="none" viewBox="0 0 24 24">
                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                    <path class="opacity-75" fill="currentColor"
                        d="M4 12a8 8 0 018-8v4l3-3-3-3v4a8 8 0 00-8 8h4l-3 3 3 3H4z"></path>
                </svg>
            </button>
        </div>
    </div>
</section>