<div class="max-w-7xl mx-auto px-6 py-12 animate-fade-in">
    <h2 class="text-3xl font-bold text-gray-800 mb-10 text-center">Your Cart</h2>

    <!-- Loading State -->
    <div *ngIf="loading" class="flex justify-center py-20">
        <div class="h-12 w-12 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"></div>
    </div>

    <!-- Empty Cart -->
    <div *ngIf="!loading && cart.length === 0" class="text-center py-24">
        <p class="text-gray-500 text-lg">Your cart is empty ðŸ›’</p>
        <a routerLink="/products"
            class="inline-block mt-6 px-6 py-3 bg-blue-600 text-white rounded-xl font-medium hover:bg-blue-700 transition cursor-pointer">
            Continue Shopping
        </a>
    </div>

    <!-- Cart Items -->
    <div *ngIf="!loading && cart.length > 0" class="space-y-6">
        <div *ngFor="let product of cart"
            class="flex flex-col sm:flex-row items-center justify-between bg-white rounded-2xl shadow-sm hover:shadow-lg transition p-5 sm:p-6 border border-gray-100">

            <!-- Product Info -->
            <div class="flex items-center w-full sm:w-auto space-x-4">
                <div>
                    <h3 class="font-semibold text-gray-800 text-lg">product</h3>
                    <p class="text-blue-600 font-semibold mt-1">{{ product.price }} EGP</p>
                    <p class="text-sm text-gray-500">Color: {{ product.color }}</p>
                </div>
            </div>

            <!-- Controls -->
            <div class="flex items-center space-x-3 mt-4 sm:mt-0">
                <!-- Decrease -->
                <button (click)="decreaseQuantity(product)" [disabled]="product.loading"
                    class="w-8 h-8 flex items-center justify-center bg-gray-100 hover:bg-gray-200 rounded-full transition disabled:opacity-50 cursor-pointer">
                    âˆ’
                </button>

                <!-- Quantity -->
                <span class="min-w-[2rem] text-center font-medium text-gray-700">{{ product.quantity }}</span>

                <!-- Increase -->
                <button (click)="increaseQuantity(product)" [disabled]="product.loading"
                    class="w-8 h-8 flex items-center justify-center bg-gray-100 hover:bg-gray-200 rounded-full transition disabled:opacity-50 cursor-pointer">
                    +
                </button>

                <!-- Remove -->
                <button (click)="removeItem(product)" [disabled]="product.loading"
                    class="ml-4 flex items-center text-red-500 hover:text-red-600 transition font-medium cursor-pointer space-x-1">
                    <!-- Trash Icon -->
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24"
                        stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round"
                            d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5-4h4m-4 0a1 1 0 00-1 1v1h6V4a1 1 0 00-1-1m-4 0h4" />
                    </svg>
                    <span>Remove</span>
                </button>

                <!-- Spinner -->
                <svg *ngIf="product.loading" class="animate-spin h-5 w-5 text-gray-600 ml-2"
                    xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                    <path class="opacity-75" fill="currentColor"
                        d="M4 12a8 8 0 018-8v4l3-3-3-3v4a8 8 0 00-8 8h4l-3 3 3 3H4z"></path>
                </svg>
            </div>
        </div>

        <!-- Cart Summary -->
        <div
            class="flex flex-col sm:flex-row justify-between items-center mt-10 bg-white rounded-2xl shadow-sm border border-gray-100 p-6">
            <p class="text-2xl font-semibold text-gray-800 mb-4 sm:mb-0">
                Total: <span class="text-blue-600">{{ total }} EGP</span>
            </p>

            <div class="flex space-x-4">
                <button (click)="clearCart()" [disabled]="loading"
                    class="px-6 py-3 bg-gray-100 text-gray-800 rounded-xl hover:bg-gray-200 font-medium transition disabled:opacity-50 cursor-pointer">
                    Clear Cart
                </button>

                <button
                    class="px-6 py-3 bg-blue-600 text-white rounded-xl hover:bg-blue-700 font-semibold shadow-sm transition cursor-pointer">
                    Checkout
                </button>
            </div>
        </div>
    </div>
</div>
