<h2 class="text-xl font-semibold mb-5 text-gray-800">
  {{ data ? 'Edit Subcategory' : 'Add Subcategory' }}
</h2>

<form [formGroup]="form" (ngSubmit)="save()" class="space-y-5">
  <!-- Subcategory Name -->
  <div>
    <label class="block text-gray-700 mb-1">Subcategory Name</label>
    <input
      type="text"
      formControlName="name"
      placeholder="Enter subcategory name"
      class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 outline-none"
    />
    @if (form.get('name')?.touched && form.get('name')?.invalid) {
      <small class="text-red-500">
        @if (form.get('name')?.errors?.['required']) { Name is required. }
        @else if (form.get('name')?.errors?.['minlength']) { Minimum 2 characters. }
      </small>
    }
  </div>

  <!-- Category -->
  <div>
    <label class="block text-gray-700 mb-1">Category</label>
    <select
      formControlName="category"
      class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 outline-none"
    >
      <option value="">Select Category</option>

      @if (categories.length > 0) {
        @for (cat of categories; track cat.id) {
          <option [value]="cat.id">{{ cat.name }}</option>
        }
      } @else {
        <option disabled>Loading categories...</option>
      }
    </select>

    @if (form.get('category')?.touched && form.get('category')?.invalid) {
      <small class="text-red-500">Category is required.</small>
    }
  </div>

  <!-- Actions -->
  <div class="flex justify-end gap-3 pt-5 border-t">
    <button
      type="button"
      (click)="close.emit({ updated: false })"
      class="px-4 py-2 border rounded-lg hover:bg-gray-100 transition"
    >
      Cancel
    </button>

    <button
      type="submit"
      [disabled]="loading"
      class="px-4 py-2 rounded-lg bg-blue-600 text-white hover:bg-blue-700 transition disabled:opacity-60"
    >
      @if (loading) {
        {{ data ? 'Updating...' : 'Creating...' }}
      } @else {
        {{ data ? 'Update' : 'Create' }}
      }
    </button>
  </div>
</form>
